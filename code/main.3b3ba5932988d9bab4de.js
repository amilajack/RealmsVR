(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("55Il"),n("p2bk"),e.exports=n("7RL8")},1:function(e,t){},"7RL8":function(e,t,n){"use strict";n.r(t);var r=n("YHGo"),i=n("q1tI"),c=n.n(i),o=n("i8i4"),a=n("ANjH"),u=n("Igns"),s=n("/MKj"),l=n("gyEF"),f=n.n(l),p=n("aJ4A"),h=n("sINF"),y=n("N2Rb"),d="REALM/FETCH_FULFILLED",v="REALM/UPDATE_GEOMETRY",m="REALM/UPDATE_VOXELS",b="REALM/RESET",g="USER/REFRESH_SESSION_FULFILLED",w="USER/REFRESH_SESSION_REJECTED",O="USER/SIGNOUT";function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL="https://projects.gatunes.com/realmsvr/"}var t,n,r;return t=e,(n=[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var t=e.body,n=e.endpoint,r=e.headers,o=void 0===r?{}:r,i=e.method,a=void 0===i?"GET":i,c=this.authorization,u=this.baseURL;return c&&(o.Authorization=c),!t||t instanceof FormData||(t=JSON.stringify(t),o["Content-Type"]="application/json"),fetch("".concat(u).concat(n),{body:t,headers:o,method:a}).then(function(e){var t=e.headers,n=e.status;if(n<200||400<=n)throw new Error(n);switch((t.get("Content-Type")||"").split(";")[0]){case"text/plain":return e.arrayBuffer();case"application/json":return e.json();default:return e}})})},{key:"setAuthorization",value:function(e){e?this.authorization="Bearer ".concat(e):delete this.authorization,this.token=e}}])&&E(t.prototype,n),r&&E(t,r),e}());function j(e){return e?{type:g,payload:e}:function(e){return e({type:"USER/REFRESH_SESSION",payload:S.fetch({endpoint:"user"})}).catch(function(){})}}n("bo1M");var _=n("wcCE");var x={en:{NotFound:{description:"This is not the web page you're looking for.",goBack:"Take me back home"},User:{signIn:"Sign-In",signOut:"Sign-Out"}},es:{NotFound:{description:"Esta no es la p치gina que est치s buscando.",goBack:"Volver al inicio"},User:{signIn:"Iniciar sesi칩n",signOut:"Cerrar sesi칩n"}}},R=Object.keys(x),k="en",P={};R.forEach(function(e){P[e]=Object(_.recursive)(!0,x.en,x[e])});var A=Object(a.c)({realms:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"LOBBY/FETCH_REALMS_FULFILLED":return t.payload;default:return e}}}),M=Object(a.c)({geometry:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case v:return t.payload.geometry;case b:return{};default:return e}},id:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case d:return t.payload._id;case b:return"";default:return e}},name:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;switch(t.type){case d:return t.payload.name;case b:return"";default:return e}},size:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case d:return t.payload.size;case b:return 0;default:return e}},voxels:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Uint32Array,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case d:case m:return t.payload.voxels;case b:return new Uint32Array;default:return e}}}),T="REALMSVR::SESSION",C=JSON.parse(localStorage.getItem(T)||"false");C&&S.setAuthorization(C.token);var D=Object(a.c)({isAuth:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!!C;switch((1<arguments.length?arguments[1]:void 0).type){case g:return!0;case w:case O:return!1;default:return e}},profile:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C?C.profile:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case g:return t.payload.profile;case w:case O:return{};default:return e}},token:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C?C.token:{},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case g:return S.setAuthorization(t.payload.token),localStorage.setItem(T,JSON.stringify(t.payload)),t.payload.token;case w:case O:return S.setAuthorization(!1),localStorage.removeItem(T),"";default:return e}}}),L=Object(a.c)({i18n:y.i18nReducer,loadingBar:l.loadingBarReducer,lobby:A,realm:M,user:D}),I=n("2INN"),U=n("mf+E"),z=n("jKe7"),W=n("17x9"),N=n.n(W),q=n("vOnD"),F=q.a.div.withConfig({displayName:"layout__Route",componentId:"d2i6t1-0"})(["display:flex;height:100vh;"]),G={backgroundColor:"#393",zIndex:1},B=function(e){var t=e.children;return c.a.createElement("div",null,c.a.createElement(f.a,{style:G}),c.a.createElement(F,null,t))};B.propTypes={children:N.a.node.isRequired};var V=B,H=n("wIs1");var Y=n("Womt");function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function i(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),i.mesh&&i.pointerMesh||i.setup(),n=K(this,Z(i).call(this));for(var r=i.mesh,o=i.pointerMesh,e=function(e){var t=r.clone();t.buttons={menu:!1,menuDown:!1,menuUp:!1,grip:!1,gripDown:!1,gripUp:!1,pad:!1,padDown:!1,padUp:!1,trigger:!1,triggerDown:!1,triggerUp:!1},t.pointer=o.clone(),t.pointer.visible=!1,t.add(t.pointer),t.matrixAutoUpdate=!1,t.setupRaycaster=function(e){return i.setupRaycaster({hand:t,raycaster:e})},t.visible=!1,n.add(t)},t=0;t<2;t+=1)e();return n}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,Y["m"]),t=i,r=[{key:"setupRaycaster",value:function(e){var t=e.hand,n=e.raycaster;t.auxMatrix||(t.auxMatrix=new Y.j);var r=t.auxMatrix,o=t.matrixWorld;r.identity().extractRotation(o),n.ray.origin.setFromMatrixPosition(o),n.ray.direction.set(0,0,-1).applyMatrix4(r),n.ray.origin.addScaledVector(n.ray.direction,-.175)}},{key:"setup",value:function(){if(!i.geometry){var e=new Y.a(1,1,1);e.scale(.05,.03,.2),e.translate(0,0,.075),e.faces.forEach(function(e,t){e.color.set(7829367),10<=t&&t<=11&&e.color.offsetHSL(0,0,-.1)}),i.geometry=(new Y.c).fromGeometry(e)}i.material||(i.material=new Y.l({color:16769213})),i.mesh||(i.mesh=new Y.k(i.geometry,i.material)),i.pointerGeometry||(i.pointerGeometry=(new Y.c).setFromPoints([new Y.t(0,0,0),new Y.t(0,0,-1)])),i.pointerMaterial||(i.pointerMaterial=new Y.i({color:16769213})),i.pointerMesh||(i.pointerMesh=new Y.h(i.pointerGeometry,i.pointerMaterial))}}],(n=[{key:"update",value:function(){var e=this.children,t="getGamepads"in navigator?navigator.getGamepads():[];e.forEach(function(e){e.visible=!1});for(var n=0,r=0;r<t.length;r+=1){var o=t[r];if(o&&("OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))&&(o.pose&&this.updateHand({hand:e[n],buttons:o.buttons,pose:o.pose}),1<(n+=1)))break}}},{key:"updateHand",value:function(e){var t=e.hand,n=e.buttons,r=e.pose,o=this.standingMatrix;null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i=n[3]&&n[3].pressed;t.buttons.menuDown=i&&t.buttons.menu!==i,t.buttons.menuUp=!i&&t.buttons.menu!==i,t.buttons.menu=i;var a=n[2]&&n[2].pressed;t.buttons.gripDown=a&&t.buttons.grip!==a,t.buttons.gripUp=!a&&t.buttons.grip!==a,t.buttons.grip=a;var c=n[0]&&n[0].pressed;t.buttons.padDown=c&&t.buttons.pad!==c,t.buttons.padUp=!c&&t.buttons.pad!==c,t.buttons.pad=c;var u=n[1]&&n[1].pressed;t.buttons.triggerDown=u&&t.buttons.trigger!==u,t.buttons.triggerUp=!u&&t.buttons.trigger!==u,t.buttons.trigger=u}}])&&X(t.prototype,n),r&&X(t,r),i}();function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae=function(e){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=re(o).call(this,e))||"object"!==ee(r)&&"function"!=typeof r?oe(n):r).canvas=c.a.createRef(),t.camera=new Y.n(90,1,.1,1024),t.camera.position.set(0,1.6,0),t.clock=new Y.e,t.raycaster=new Y.q,t.raycaster.far=32,t.room=new Y.m,t.room.add(t.camera),t.hands=new $,t.room.add(t.hands),t.head={offset:new Y.t,position:new Y.t,rotation:new Y.p,scale:new Y.t},t.scene=new Y.r,t.scene.add(t.room),t.scene.fog=new Y.g(0,.015),t.scene.fog.color.setRGB(0,0,.1),t.onAnimationTick=t.onAnimationTick.bind(oe(t)),t.onResize=t.onResize.bind(oe(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(o,i["Component"]),t=o,(n=[{key:"componentDidMount",value:function(){var e=this.canvas.current,t=new Y.v({antialias:!0,canvas:e,powerPreference:"high-performance",stencil:!1});t.setPixelRatio(window.devicePixelRatio||1),t.setClearColor(this.scene.fog.color),this.renderer=t,this.onResize(),this.setupVR(),window.addEventListener("resize",this.onResize,!1),t.setAnimationLoop(this.onAnimationTick)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this.renderer;e.setAnimationLoop(null),e.dispose(),e.forceContextLoss(),window.removeEventListener("resize",this.onResize)}},{key:"onAnimationTick",value:function(){var e=this.camera,t=this.clock,n=this.hands,r=this.renderer,o=this.scene;r.animation={delta:t.getDelta(),time:t.oldTime/1e3},n.update(),r.render(o,e)}},{key:"onBeforeRender",value:function(e,t,n){var r=this.head,o=this.room;n.matrixWorld.decompose(r.position,r.rotation,r.scale),r.offset.copy(r.position).sub(o.position)}},{key:"onResize",value:function(){var e=this.canvas.current,t=this.camera,n=this.renderer,r=e.parentNode.getBoundingClientRect(),o=r.width,i=r.height;n.vr.isPresenting()||n.setSize(o,i),t.aspect=o/i,t.updateProjectionMatrix()}},{key:"setupVR",value:function(){var e=this.hands,n=this.renderer,t="xr"in navigator,r="getVRDisplays"in navigator;if(t){var o=function(){if(!n.vr.isPresenting()){var e=n.vr.getDevice();e?e.requestSession({immersive:!0,exclusive:!0}).then(function(e){n.vr.setSession(e,{frameOfReferenceType:"stage"})}):navigator.xr.requestDevice().then(function(e){n.vr.enabled=!0,n.vr.setDevice(e)})}};window.addEventListener("mousedown",o,!1),o()}else if(r){var i=function(){if(!n.vr.isPresenting()){var e=n.vr.getDevice();e?e.requestPresent([{source:n.domElement}]):navigator.getVRDisplays().then(function(e){if(e.length){var t=te(e,1)[0];n.vr.enabled=!0,n.vr.setDevice(t)}})}};window.addEventListener("mousedown",i,!1),window.addEventListener("vrdisplayactivate",i,!1),i()}e.standingMatrix=n.vr.getStandingMatrix()}},{key:"render",value:function(){var e=this.canvas;return c.a.createElement("canvas",{ref:e})}}])&&ne(t.prototype,n),r&&ne(t,r),o}();Y.s.fog_pars_vertex=Y.s.fog_pars_vertex.replace("varying float fogDepth;","varying vec4 fogDepth;"),Y.s.fog_vertex=Y.s.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = mvPosition;"),Y.s.fog_pars_fragment=Y.s.fog_pars_fragment.replace("varying float fogDepth;","varying vec4 fogDepth;"),Y.s.fog_fragment=Y.s.fog_fragment.replace("float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );",["float fogDist = length(fogDepth);","float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDist * fogDist * LOG2 ) );"].join("\n")).replace("float fogFactor = smoothstep( fogNear, fogFar, fogDepth );","float fogFactor = smoothstep( fogNear, fogFar, length(fogDepth) );");var ce=ae;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=document.createElement("canvas");t.width=512,t.height=512;var n=new Y.d(t);e=le(this,fe(o).call(this,new Y.o(1,1),new Y.l({map:n})));var r=new Y.k(new Y.o(1,1),new Y.l({color:1118481}));return r.geometry.rotateY(Math.PI),e.add(r),e.context=t.getContext("2d"),e.pointer=new Y.t,e.renderer=t,e.texture=n,e}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(o,Y["k"]),t=o,(n=[{key:"draw",value:function(){var e=this.context,t=this.renderer,n=this.texture;e.fillStyle="#111",e.fillRect(0,0,t.width,t.height),n.needsUpdate=!0}},{key:"onPointer",value:function(e){var t=this.pointer,n=this.renderer;this.worldToLocal(t.copy(e)),t.set((t.x+.5)*n.width,(1-(t.y+.5))*n.height,0)}}])&&se(t.prototype,n),r&&se(t,r),o}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function be(e,t,n){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function h(e){var t,n=e.history;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=ve(this,me(h).call(this))).history=n,t.position.set(0,1.6,-1),t.realms=[],t.draw(),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(h,he),t=h,(n=[{key:"draw",value:function(){var c=this.context,u=this.hover,e=this.realms,s=this.renderer;be(me(h.prototype),"draw",this).call(this),c.font="40px Roboto",c.textAlign="center",c.textBaseline="middle",e.forEach(function(e,t){var n=e.name,r=e.x,o=e.y,i=e.width,a=e.height;c.fillStyle=u===t?"#555":"#333",c.fillRect(r,o+.01*s.height,i,a-.02*s.height),c.fillStyle="#fff",c.fillText(n,.5*i,o+.5*a)})}},{key:"onPointer",value:function(e){var t=e.isDown,n=e.point,r=this.history,o=this.pointer,i=this.realms;be(me(h.prototype),"onPointer",this).call(this,n);for(var a=0;a<i.length;a+=1){var c=i[a],u=c.slug,s=c.x,l=c.y,f=c.width,p=c.height;if(o.x>=s&&o.x<=s+f&&o.y>=l&&o.y<=l+p)return t?void r.push("/".concat(u)):void(this.hover!==a&&(this.hover=a,this.draw()))}delete this.hover}},{key:"update",value:function(e){var n=this.renderer;this.realms=e.map(function(e,t){return{name:e.name,slug:e.slug,x:0,y:t*n.height*.2,width:n.width,height:.2*n.height}}),this.draw()}}])&&de(t.prototype,n),r&&de(t,r),h}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e,t,n){return(je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function i(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=this;var o=Se(t=!(r=_e(i).call(this,e))||"object"!==Oe(r)&&"function"!=typeof r?Se(n):r).scene;return t.menu=new we({history:e.history}),o.add(t.menu),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(i,ce),t=i,(n=[{key:"componentWillReceiveProps",value:function(e){var t=e.realms;t!==this.props.realms&&this.menu.update(t)}},{key:"componentDidMount",value:function(){var e=this.props.fetchRealms;je(_e(i.prototype),"componentDidMount",this).call(this),e({page:0})}},{key:"onBeforeRender",value:function(e,t,n){je(_e(i.prototype),"onBeforeRender",this).call(this,e,t,n);var r=this.hands,a=this.menu,c=this.raycaster;r.children.forEach(function(e){var t=e.buttons,n=e.pointer;e.setupRaycaster(c);var r=c.intersectObject(a)[0]||!1;if(r){var o=r.distance,i=r.point;n.scale.z=o-.175,n.visible=!0,a.onPointer({isDown:t.triggerDown,point:i})}else n.visible=!1})}}])&&Ee(t.prototype,n),r&&Ee(t,r),i}();Re.propTypes={history:N.a.object.isRequired,realms:N.a.arrayOf(N.a.shape({name:N.a.string.isRequired,slug:N.a.string.isRequired})).isRequired,fetchRealms:N.a.func.isRequired};var ke=Object(H.a)(Object(s.connect)(function(e){return{realms:e.lobby.realms}},{fetchRealms:function(e){var t=e.page,n=void 0===t?0:t;return{type:"LOBBY/FETCH_REALMS",payload:S.fetch({endpoint:"realms/".concat(n)})}}})(Re)),Pe=n("O1PE");function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=q.a.div.withConfig({displayName:"session__Wrapper",componentId:"cxd9mo-0"})(["position:fixed;top:0;right:0;> button{display:flex;align-items:center;outline:0;font-family:inherit;font-size:1.2rem;font-weight:700;width:150px;padding:0.5rem 1rem;> svg{margin-right:0.5rem;}}"]),Ie=function(e){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Te(o).call(this,e))||"object"!==Ae(r)&&"function"!=typeof r?Ce(n):r).loginWithGoogle=t.loginWithGoogle.bind(Ce(t)),t.onMessage=t.onMessage.bind(Ce(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(o,i["PureComponent"]),t=o,(n=[{key:"componentWillUnmount",value:function(){var e=this.popupWatcher;e&&(window.removeEventListener("message",this.onMessage),clearInterval(e),delete this.popupWatcher)}},{key:"onMessage",value:function(e){var t=e.origin,n=e.data.session,r=this.popupWatcher,o=this.props.refreshSession;0===S.baseURL.indexOf(t)&&(window.removeEventListener("message",this.onMessage),clearInterval(r),delete this.popupWatcher,n&&o(n))}},{key:"loginWithGoogle",value:function(e){var t=this,n=e.screenX,r=e.screenY,o=(n||window.screen.width/2)-512,i=r||window.screen.height/2,a=window.open("".concat(S.baseURL,"user/google"),"loginWithGoogle","width=".concat(512,",height=").concat(512,",top=").concat(i,",left=").concat(o));this.popupWatcher&&(window.removeEventListener("message",this.onMessage),clearInterval(this.popupWatcher)),this.popupWatcher=setInterval(function(){if(!a.window)return clearInterval(t.popupWatcher),void delete t.popupWatcher;a.postMessage(!0,S.baseURL)},100),window.addEventListener("message",this.onMessage,!1)}},{key:"render",value:function(){var e=this.props,t=e.isAuth,n=e.signout;return c.a.createElement(Le,null,t?c.a.createElement("button",{type:"button",onClick:n},c.a.createElement(Pe.TiEject,null),c.a.createElement(y.Translate,{value:"User.signOut"})):c.a.createElement("button",{type:"button",onClick:this.loginWithGoogle},c.a.createElement(Pe.TiSocialGooglePlus,null),c.a.createElement(y.Translate,{value:"User.signIn"})))}}])&&Me(t.prototype,n),r&&Me(t,r),o}();Ie.propTypes={isAuth:N.a.bool.isRequired,refreshSession:N.a.func.isRequired,signout:N.a.func.isRequired};var Ue=Object(s.connect)(function(e){return{isAuth:e.user.isAuth}},{refreshSession:j,signout:function(){return{type:O}}})(Ie),ze=q.a.div.withConfig({displayName:"lobby__Wrapper",componentId:"sc-1phwihh-0"})(["width:100vw;height:100vh;"]),We=function(){return c.a.createElement(ze,null,c.a.createElement(ke,null),c.a.createElement(Ue,null))};function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Be(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,i["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.slug;(0,e.fetch)(t)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){(0,this.props.reset)()}},{key:"render",value:function(){return null}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}();He.propTypes={match:N.a.shape({params:N.a.shape({slug:N.a.string.isRequired}).isRequired}).isRequired,fetch:N.a.func.isRequired,reset:N.a.func.isRequired};var Ye=Object(H.a)(Object(s.connect)(function(){return{}},{fetch:function(e){return{type:"REALM/FETCH",payload:S.fetch({endpoint:"realm/".concat(e)}).then(function(t){return S.fetch({endpoint:"realm/".concat(t._id,"/voxels")}).then(function(e){return function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},t,{voxels:new Uint32Array(e)})})})}},reset:function(){return{type:b}}})(He)),Je=n("f7Ve"),Xe=n.n(Je);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=function(e){function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=Qe(o).call(this,e))||"object"!==Ke(r)&&"function"!=typeof r?$e(n):r).onMessage=t.onMessage.bind($e(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(o,i["Component"]),t=o,(n=[{key:"componentDidMount",value:function(){var e=new Xe.a;e.onmessage=this.onMessage,this.worker=e}},{key:"componentWillReceiveProps",value:function(e){var t=e.size,n=e.voxels,r=this.worker;n!==this.props.voxels&&r.postMessage({size:t,voxels:n})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.worker.destroy()}},{key:"onMessage",value:function(e){var t=e.data.geometry;(0,this.props.updateGeometry)(t)}},{key:"render",value:function(){return null}}])&&Ze(t.prototype,n),r&&Ze(t,r),o}();tt.propTypes={size:N.a.number.isRequired,voxels:N.a.instanceOf(Uint32Array).isRequired,updateGeometry:N.a.func.isRequired};var nt=Object(s.connect)(function(e){var t=e.realm;return{size:t.size,voxels:t.voxels}},{updateGeometry:function(e){return{type:v,payload:{geometry:e}}}})(tt);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e,t,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function g(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),t=this;var r=it(e=!(n=ct(g).call(this))||"object"!==rt(n)&&"function"!=typeof n?it(t):n).renderer;return e.position.set(-.15,.15,.075),e.rotation.set(0,.5*Math.PI,.1*Math.PI,"ZYX"),e.scale.set(.3,.3,1),e.block={x:.05*r.width,y:.05*r.height,width:.75*r.width,height:.75*r.height},e.strip={x:.85*r.width,y:.05*r.height,width:.1*r.width,height:.75*r.height},e.blockColor=new Y.f,e.color=new Y.f,e.blockColor.setRGB(1,0,0),e.color.copy(e.blockColor),e.draw(),e}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(g,he),t=g,(n=[{key:"draw",value:function(){var e=this.block,t=this.blockColor,n=this.color,r=this.context,o=this.renderer,i=this.strip;at(ct(g.prototype),"draw",this).call(this);var a=e.x,c=e.y,u=e.width,s=e.height;r.save(),r.translate(a,c),r.fillStyle="#".concat(t.getHexString()),r.fillRect(0,0,u,s);var l=r.createLinearGradient(0,0,u,0);l.addColorStop(0,"rgba(255,255,255,1)"),l.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=l,r.fillRect(0,0,u,s);var f=r.createLinearGradient(0,0,0,s);f.addColorStop(0,"rgba(0,0,0,0)"),f.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=f,r.fillRect(0,0,u,s),r.restore();var p=i.x,h=i.y,y=i.width,d=i.height;r.save(),r.translate(p,h);var v=r.createLinearGradient(0,0,0,d);v.addColorStop(0,"rgba(255, 0, 0, 1)"),v.addColorStop(.17,"rgba(255, 255, 0, 1)"),v.addColorStop(.34,"rgba(0, 255, 0, 1)"),v.addColorStop(.51,"rgba(0, 255, 255, 1)"),v.addColorStop(.68,"rgba(0, 0, 255, 1)"),v.addColorStop(.85,"rgba(255, 0, 255, 1)"),v.addColorStop(1,"rgba(255, 0, 0, 1)"),r.fillStyle=v,r.fillRect(0,0,y,d),r.restore(),r.save();var b=.3*o.width,m=.1*o.width;r.translate(.35*o.width,.85*o.height),r.rect(0,0,b,m),r.fillStyle="#".concat(n.getHexString()),r.fillRect(0,0,b,m),r.restore()}},{key:"onPointer",value:function(e){var u=this,t=this.block,s=this.blockColor,l=this.color,f=this.context,p=this.pointer,n=this.strip;at(ct(g.prototype),"onPointer",this).call(this,e),[t,n].forEach(function(e,t){var n=e.x,r=e.y,o=e.width,i=e.height;if(!(p.x<n||p.x>n+o||p.y<r||p.y>r+i)){var a=1===t,c=f.getImageData(p.x,p.y,1,1).data;a&&s.setRGB(c[0]/255,c[1]/255,c[2]/255),l.setRGB(c[0]/255,c[1]/255,c[2]/255),u.draw()}})}}])&&ot(t.prototype,n),r&&ot(t,r),g}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=pt(this,ht(t).call(this))).geometry=new Y.c,e.material=new Y.l({vertexColors:Y.u}),e.visible=!1,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,Y["m"]),n=t,(r=[{key:"resize",value:function(e){for(var t=this.children,n=this.geometry,r=this.material;t.length;)this.remove(t[0]);for(var o=-8;o<=8;o+=1)for(var i=-8;i<=8;i+=1)for(var a=-8;a<=8;a+=1){var c=new Y.k(n,r);c.matrixAutoUpdate=!1,c.position.set(a*e,i*e,o*e),c.updateMatrix(),this.add(c)}}},{key:"update",value:function(e){var t=e.index,n=e.position,r=e.color,o=e.normal,i=this.geometry;i.attributes.position?(i.attributes.position.setArray(n),i.attributes.position.needsUpdate=!0):i.addAttribute("position",new Y.b(n,3)),i.attributes.color?(i.attributes.color.setArray(r),i.attributes.color.needsUpdate=!0):i.addAttribute("color",new Y.b(r,3)),i.attributes.normal?(i.attributes.normal.setArray(o),i.attributes.normal.needsUpdate=!0):i.addAttribute("normal",new Y.b(o,3)),i.index?(i.index.setArray(t),i.index.needsUpdate=!0):i.setIndex(new Y.b(t,1)),i.computeBoundingSphere(),this.visible=!0}}])&&ft(n.prototype,r),o&&ft(n,o),t}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function mt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t,n){return(Ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Et(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=function(e){function s(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=this;var o=wt(t=!(r=Et(s).call(this,e))||"object"!==vt(r)&&"function"!=typeof r?wt(n):r),i=o.hands,a=o.scene;return a.onBeforeRender=t.onBeforeRender.bind(wt(t)),t.picker=new st,i.children[1].add(t.picker),t.intersects=[t.picker],t.voxels=new dt,a.add(t.voxels),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(s,ce),t=s,(n=[{key:"componentWillReceiveProps",value:function(e){var t=e.geometry,n=e.size,r=this.picker,o=this.room,i=this.voxels,a=this.props,c=a.geometry;n!==a.size&&(o.position.set(.5*n,.5*n,.5*n),i.resize(n),this.intersects=[r].concat(mt(i.children))),t!==c&&i.update(t)}},{key:"onBeforeRender",value:function(e,t,n){Ot(Et(s.prototype),"onBeforeRender",this).call(this,e,t,n);var r=this.props,h=r.size,y=r.updateVoxels,o=this.hands,d=this.head,v=this.intersects,b=this.picker,m=this.raycaster,g=this.room;o.children.forEach(function(e){var t=e.buttons,n=e.pointer;e.setupRaycaster(m);var r=m.intersectObjects(v)[0]||!1;if(r){var o=r.distance,i=r.face.normal,a=r.object,c=r.point;if(n.scale.z=o-.175,n.visible=!0,a!==b){if(t.padDown&&0===i.x&&1===i.y&&0===i.z){var u={x:-d.offset.x,y:0,z:-d.offset.z},s=bt(["x","y","z"].map(function(e){for(var t=Math.floor(c[e]-u[e]);t<0;)t+=h;for(;h<=t;)t-=h;return t}),3),l=s[0],f=s[1],p=s[2];g.position.set(l,f,p)}(t.triggerDown||t.gripDown)&&y({color:b.color,point:c,normal:i,remove:t.gripDown})}else t.triggerDown&&b.onPointer(c)}else n.visible=!1});var i=e.animation;if(!e.vr.enabled&&h){var a=i.delta,c=i.time,u=.001*Math.sin(.1*c);n.rotateY(u),n.rotateX(u),n.translateZ(.5*a),n.updateMatrixWorld(),["x","y","z"].forEach(function(e){n.position[e]<0&&(n.position[e]+=h),n.position[e]>=h&&(n.position[e]-=h)})}}}])&&gt(t.prototype,n),r&&gt(t,r),s}();jt.propTypes={geometry:N.a.shape({index:N.a.instanceOf(Uint32Array),position:N.a.instanceOf(Float32Array),color:N.a.instanceOf(Float32Array),normal:N.a.instanceOf(Float32Array)}).isRequired,size:N.a.number,updateVoxels:N.a.func.isRequired};var _t=Object(s.connect)(function(e){var t=e.realm;return{geometry:t.geometry,size:t.size}},{updateVoxels:function(e){var y=e.color,d=e.normal,v=e.point,b=e.remove;return function(e,t){var n=t().realm,r=n.size,o=n.voxels,i=Ne(["x","y","z"].map(function(e){for(var t=Math.floor(v[e]+.5*d[e]*(b?-1:1));t<0;)t+=r;for(;r<=t;)t-=r;return t}),3),a=i[0],c=i[1],u=i[2],s=Math.min(Math.max(Math.round(255*y.r+8*Math.random()-4),0),255),l=Math.min(Math.max(Math.round(255*y.g+8*Math.random()-4),0),255),f=Math.min(Math.max(Math.round(255*y.b+8*Math.random()-4),0),255),p=b?0:1<<24|s<<16|l<<8|f,h=new Uint32Array(o);return h[u*r*r+c*r+a]=p,e({type:m,payload:{voxels:h}})}}})(jt),xt=q.a.div.withConfig({displayName:"realm__Wrapper",componentId:"sc-1bdzkyg-0"})(["width:100vw;height:100vh;"]),Rt=function(){return c.a.createElement(xt,null,c.a.createElement(Ye,null),c.a.createElement(nt,null),c.a.createElement(_t,null))},kt=n("2iEm"),Pt=q.a.div.withConfig({displayName:"sc-404__Wrapper",componentId:"g6uuyh-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;justify-content:center;"]),At=q.a.div.withConfig({displayName:"sc-404__Status",componentId:"g6uuyh-1"})(["font-size:6em;line-height:0.8em;color:#656565;margin-bottom:2rem;"]),Mt=q.a.div.withConfig({displayName:"sc-404__Description",componentId:"g6uuyh-2"})(["font-size:1.5em;"]),Tt=q.a.div.withConfig({displayName:"sc-404__Alternative",componentId:"g6uuyh-3"})(["margin:2rem 0 4rem;> a{display:flex;align-items:center;text-decoration:none;font-size:1.2em;color:inherit;> svg{margin-right:0.5rem;}}"]),Ct=function(){return c.a.createElement(Pt,null,c.a.createElement(At,null,"404"),c.a.createElement(Mt,null,c.a.createElement(y.Translate,{value:"NotFound.description"})),c.a.createElement(Tt,null,c.a.createElement(kt.a,{to:{pathname:"/"}},c.a.createElement(Pe.TiArrowBack,null),c.a.createElement(y.Translate,{value:"NotFound.goBack"}))))};function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var It,Ut,zt,Wt,Nt=Object(s.connect)(function(e){return{isAuth:e.user.isAuth}})(function(e){var t=e.component,n=e.isAuth,r=e.requiresAuth,o=e.requiresNoAuth,i=Lt(e,["component","isAuth","requiresAuth","requiresNoAuth"]),a=r&&!n||o&&n;return c.a.createElement(I.a,Dt({},i,{render:function(e){return a?c.a.createElement(U.a,{to:"/"}):c.a.createElement(t,e)}}))}),qt=function(){return c.a.createElement(V,null,c.a.createElement(z.a,null,c.a.createElement(Nt,{exact:!0,path:"/",component:We}),c.a.createElement(Nt,{exact:!0,path:"/404",component:Ct}),c.a.createElement(Nt,{exact:!0,path:"/:slug",component:Rt}),c.a.createElement(Nt,{path:"*",component:Ct})))},Ft=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,a.d),Gt=Object(a.e)(L,{},Ft(Object(a.a)(h.a,u.a,Object(l.loadingBarMiddleware)())));It=Gt,Ut=localStorage.getItem("REALMSVR::LOCALE"),zt=((window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||k).substr(0,2).toLowerCase(),Wt=k,~R.indexOf(Ut)?Wt=Ut:~R.indexOf(zt)&&(Wt=zt),Object(y.syncTranslationWithStore)(It),It.dispatch(Object(y.loadTranslations)(P)),It.dispatch(Object(y.setLocale)(Wt)),Gt.getState().user.isAuth&&Gt.dispatch(j());var Bt=Object(r.a)({basename:"/"});window.location.hash&&Bt.replace("/".concat(window.location.hash.substr(2))),window.addEventListener("contextmenu",function(e){return e.preventDefault()},!1);var Vt=document.getElementById("mount");Object(o.render)(c.a.createElement(s.Provider,{store:Gt},c.a.createElement(p.a,{history:Bt},c.a.createElement(qt,null))),Vt)},f7Ve:function(e,t,n){e.exports=function(){return new Worker(n.p+"code/mesher.worker.197743694d6b7b6d94d4.js")}},p2bk:function(e,t,n){}},[[0,1,2]]]);
//# sourceMappingURL=main.2a2f43667b443cc2bb33543db4a74e07.js.map